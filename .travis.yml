# Boilerplate to select python and add v2 and v3 to test matrix.
language: python
python:
    - "2.7"
    - "3.3"

install:
    # Install latest GDAL packages
    - "sudo add-apt-repository -y ppa:ubuntugis/ppa"
    - "sudo apt-get update -qq"
    - "sudo apt-get install -y gdal-bin libgdal-dev libgdal1-dev netcdf-bin libproj-dev libgdal1h"
    - "CPLUS_INCLUDE_PATH=/usr/include/gdal C_INCLUDE_PATH=/usr/include/gdal pip install GDAL==1.10.0"
    # Install coveralls (coverage support for travis)
    - "pip install coveralls"
    # Install (specific) requirements and ourself
    - "pip install -r requirements.txt"
    # Install stuff for running test suite
    - "pip install -r tests/requirements.txt"

script:
    # Run tests
    - "nosetests -e testing --with-coverage --cover-package=tawhiri"
    # Build documentation
    - "python setup.py build_sphinx"

after_success:
    # Update code-coverage information on coveralls.io
    - "coveralls"
